#Copyright IBM Corp. 2017. All Rights Reserved.
#Licensed under "The MIT License (MIT)"
swagger: '2.0'
info:
  x-ibm-name: fatest2
  title: 2FATest-validate
  version: '2'
schemes:
  - https
host: $(catalog.host)
basePath: /fatest
consumes:
  - application/json
produces:
  - application/json
x-ibm-configuration:
  testable: true
  enforced: true
  cors:
    enabled: true
  assembly:
    execute:
      - invoke:
          title: invoke
          timeout: 60
          verb: GET
          cache-response: protocol
          cache-ttl: 900
          version: 1.0.0
          target-url: 'https://2fasample.mybluemix.net/{email}'
          output: userid
      - authytokenvalidate:
          version: 1.0.0
          apikey: zc4DA9AatjZ3vBQviUypZyoaV1yIn5iq
          userid: $(userid.body.userid)
          token: '{token}'
          tlsProfile: authy
          timeout: 100
  gateway: datapower-gateway
  phase: realized
paths:
  /validate:
    get:
      responses:
        '200':
          description: 200 OK
    parameters:
      - name: email
        type: string
        required: false
        in: query
      - name: token
        type: string
        required: false
        in: query
tags: []
